# Trade & Growth Simulator

ランダムに生成された大陸上で、村が資源を収集し、交易によって発展していく過程を眺めるシミュレーションゲーム。  
道は村同士を結び、交通量に応じて発展し、都市の成長を支える仕組みを持ちます。  

---

## 🌍 ゲーム概要
- マップは **2D タイルベース** の俯瞰表示。  
- 村は資源を集め、交易で資源をやり取りしながら発展していく。  
- プレイヤーは基本的に直接介入せず、**資源や土地条件（神視点）** のみを操作可能。  
- 道は交通に応じて進化し、村から町、都市へと発展していく姿を観察できる。  

---

## 🏞 マップとタイル
- マップはグリッド形式のタイル。  
- 各タイルの種類：
  - 平地
  - 森
  - 山
  - 水域
  - 道路
- 各タイルには **移動コスト** が設定される。
  - 道路タイル：低コスト
  - 森・山：高コスト
  - 水域：通行不可または超高コスト
- 既存の道路や近隣に道路がある場合はコストを下げ、再利用を促す。

---

## 🏘 村（Village）
- 村はマップ上に配置される拠点。  
- **人口** を持ち、人口に比例して資源を消費する。
  - 食料 → 人口に比例して毎ターン消費
  - 木材・鉱石 → 建物建設で消費
  - 建物数は人口に比例して増加
- 村は需要と供給を持ち、資源が不足すると発展が止まる。  

---

## 🛣 道路生成
### 1. 初期敷設
- **Delaunay 三角分割**で村間の接続候補を決定。  

### 2. 経路決定（コスト最適化）
- 候補ごとにタイルコストを考慮した経路を敷設する。  
- 流れ：
  1. 直線サンプリングで概算コストを計算  
  2. 妥当なら **コリドー制約付き A\*** を実行し、直線に近い低コスト経路を求める  
  3. 経路が確定したら道路タイルとして設定  

### 3. 道路グラフ
- 敷設した道路は **グラフ構造** に変換される。
  - ノード：交差点・端点・カーブ
  - エッジ：ノード間の道路区間
- 今後の経路探索や交易はこの道路グラフを利用。

---

## 📦 交易システム
- 村同士で資源を輸送できる。  
- 交易経路は **道路グラフを用いた最短経路** で決定される。  
- 輸送時間は道路経路の総コストに比例。  
- 可視化（予定）：
  - 村間を結ぶ線で輸送を表示
  - 資源アイコンやラインの太さで種類や量を表現  

---

## 🚀 今後の拡張予定
- 道路生成を完全にグラフ方式へ移行（タイル探索を不要に）。  
- 村間交易の需給バランス強化（資源不足/余剰のシステム化）。  
- 交易や村の成長をより視覚的に表現（UI、アニメーション）。  
- 環境音や BGM の導入（箱庭感を高める）。  

---

## 🛠 技術スタック
- **TypeScript**
- **Vite**（開発環境）
- **HTML5 Canvas**（描画）
- 経路探索：カスタム A\* アルゴリズム  
- 公開方法：GitHub Pages  

---

## 📖 開発手順
```bash
# 依存関係をインストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build
